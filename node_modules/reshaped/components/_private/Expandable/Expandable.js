"use client";
import { jsx as _jsx } from "react/jsx-runtime";
import React from "react";
import s from "./Expandable.module.css";
import { classNames } from "../../../utilities/helpers.js";
import { onNextFrame } from "../../../utilities/animation.js";
const Expandable = (props) => {
    const { children, active, attributes } = props;
    const [rendered, setRendered] = React.useState(active);
    const rootClassNames = classNames(s.root, active && rendered && s["--active"], !active && !rendered && s["--hidden"]);
    const handleTransitionEnd = (e) => {
        if (e.propertyName !== "height")
            return;
        if (active)
            return;
        onNextFrame(() => {
            setRendered(false);
        });
    };
    React.useEffect(() => {
        if (!active)
            return;
        setRendered(active);
    }, [active]);
    return (_jsx("div", Object.assign({}, attributes, { className: rootClassNames, onTransitionEnd: handleTransitionEnd, role: "region", hidden: !active, children: _jsx("div", { className: s.inner, children: children }) })));
};
export default Expandable;
